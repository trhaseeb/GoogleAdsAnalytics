<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Data Dashboard</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.7/css/dataTables.dataTables.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.7/js/dataTables.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Business Data Dashboard</h1>

        <div class="controls">
            <div class="date-filters">
                <label for="startDate">Start Date:</label>
                <input type="date" id="startDate">
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate">
                <button id="applyFilter">Apply Filter</button>
            </div>
            <div class="chart-options">
                <h3>Chart Display Options:</h3>
                <div class="chart-toggles">
                    <label><input type="checkbox" class="chart-metric-toggle" data-metric="Conversions" checked> Conversions</label>
                    <label><input type="checkbox" class="chart-metric-toggle" data-metric="Spam" checked> Spam</label>
                    <label><input type="checkbox" class="chart-metric-toggle" data-metric="Unqualified Leads" checked> Unqualified Leads</label>
                    <label><input type="checkbox" class="chart-metric-toggle" data-metric="Qualified Leads" checked> Qualified Leads</label>
                    <label><input type="checkbox" class="chart-metric-toggle" data-metric="Contracts Signed" checked> Contracts Signed</label>
                </div>
                <div class="chart-type-selector">
                    <label for="chartType">Chart Type:</label>
                    <select id="chartType">
                        <option value="line">Line</option>
                        <option value="bar">Bar</option>
                        <option value="area">Area</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="charts-container">
            <div id="combinedMetricsChart" class="chart"></div>
            <div id="costChart" class="chart"></div>
        </div>

        <h2>Lead Pipeline Overview</h2>
        <div id="leadStatusChart" class="chart single-chart-row"></div>


        <h2>All Daily Data</h2>
        <table id="dataTable" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Conversions</th>
                    <th>Spam</th>
                    <th>Unqualified Leads</th>
                    <th>Qualified Leads</th>
                    <th>Cost</th>
                    <th>Contracts Signed</th>
                    <th>Company Name</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>

        <h2>Qualified Leads that Turned into Contracts</h2>
        <table id="contractsTable" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Lead Name</th>
                    <th>Company Name</th>
                    <th>Service Type</th>
                    <th>Contract Date</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>

        <div class="forms-container">
            <div class="form-section">
                <h2>Add New Daily Data</h2>
                <form id="addDailyDataForm">
                    <label for="newDataDate">Date:</label>
                    <input type="date" id="newDataDate" required><br>

                    <label for="newDataConversions">Conversions:</label>
                    <input type="number" step="0.01" id="newDataConversions" value="0"><br>

                    <label for="newDataSpam">Spam:</label>
                    <input type="number" id="newDataSpam" value="0"><br>

                    <label for="newDataUnqualified">Unqualified Leads:</label>
                    <input type="number" id="newDataUnqualified" value="0"><br>

                    <label for="newDataQualified">Qualified Leads:</label>
                    <input type="number" id="newDataQualified" value="0"><br>

                    <label for="newDataCost">Cost:</label>
                    <input type="number" step="0.01" id="newDataCost" value="0"><br>

                    <label for="newDataContracts">Contracts Signed (Count):</label>
                    <input type="number" id="newDataContracts" value="0"><br>

                    <label for="newDataCompany">Company Name (Daily Aggregate):</label>
                    <input type="text" id="newDataCompany" value="N/A"><br>

                    <button type="submit">Add Daily Data</button>
                </form>
            </div>

            <div class="form-section">
                <h2>Add New Contract</h2>
                <form id="addContractForm">
                    <label for="newContractDate">Lead Date:</label>
                    <input type="date" id="newContractDate" required><br>

                    <label for="newContractLeadName">Lead Name:</label>
                    <input type="text" id="newContractLeadName" required><br>

                    <label for="newContractCompany">Company Name:</label>
                    <select id="newContractCompany" required>
                        <option value="">-- Select Company --</option>
                        </select>
                    <input type="text" id="newContractCompanyText" placeholder="Or enter new company name" style="display:none;"><br>
                    <button type="button" id="toggleCompanyInput">Enter New Company</button><br>


                    <label for="newContractServiceType">Service Type:</label>
                    <input type="text" id="newContractServiceType" value="N/A"><br>

                    <label for="newContractSignedDate">Contract Signed Date:</label>
                    <input type="date" id="newContractSignedDate" required><br>

                    <button type="submit">Add Contract</button>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
